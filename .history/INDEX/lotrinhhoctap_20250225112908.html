<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Hỗ Trợ Học Tập</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
       /* CSS cho trang */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Roboto', sans-serif;
}

/* Body */
body {
    background: linear-gradient(135deg, #d1e8ff, #e6f0fa, #f0f7ff, #d1e8ff); /* Gradient xanh nhạt và trắng */
    background-size: 300% 300%;
    animation: gradientBG 15s ease infinite; /* Hiệu ứng chuyển động nhẹ */
    color: #2c3e50; /* Màu chữ tối để nổi trên nền sáng */
    line-height: 1.6;
    min-height: 100vh;
    position: relative;
}

/* Hiệu ứng nền động */
@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Header */
header {
    background: linear-gradient(135deg, #4facfe, #00f2fe); /* Gradient xanh dương nhạt và xanh ngọc sáng */
    color: #0a192f; /* Màu chữ tối để nổi trên nền sáng */
    padding: 2.5rem 0;
    text-align: center;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    position: relative;
    z-index: 10;
}

header h1 {
    font-size: 3.5rem; /* Tăng kích thước chữ */
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 3px;
    background: linear-gradient(135deg, #ffd700, #ff8c00); /* Gradient vàng ánh kim cho chữ */
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 3px 10px rgba(0, 0, 0, 0.4); /* Bóng đổ đậm hơn */
    animation: fadeInDown 1s ease;
}

/* Container */
.container {
    display: flex;
    justify-content: space-between;
    width: 90%;
    max-width: 1400px;
    margin: 40px auto;
    gap: 40px;
}

/* Form Container */
.form-container {
    width: 50%;
    background: rgba(255, 255, 255, 0.98);
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.form-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.15);
}

.form-container h2 {
    color: #2a5298;
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 25px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Result Container */
.result-container {
    width: 50%;
    background: rgba(255, 255, 255, 0.98);
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.result-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.15);
}

.result-container h2 {
    color: #2a5298;
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 25px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Input, Select */
input[type="text"],
select {
    width: 100%;
    padding: 14px;
    margin-bottom: 20px;
    border: 2px solid #dfe6e9;
    border-radius: 8px;
    font-size: 1.1rem;
    background: #f9fbfd;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

input[type="text"]:focus,
select:focus {
    border-color: #ffd700;
    outline: none;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    background: #fff;
}

/* Button */
button {
    padding: 14px;
    background: linear-gradient(135deg, #ffd700, #f7b733);
    color: #0a192f;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    font-size: 1.2rem;
    font-weight: 600;
    transition: all 0.4s ease;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
}

button:hover {
    background: linear-gradient(135deg, #f7b733, #ffd700);
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
}

/* Response */
.response {
    margin-top: 20px;
    padding: 25px;
    background: #f9fbfd;
    border: 2px solid #dfe6e9;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    font-size: 1.1rem;
    line-height: 1.6;
    color: #2c3e50;
}

.response h2 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #2a5298;
}

.response h3 {
    font-size: 1.3rem;
    margin: 10px 0;
    color: #1e3c72;
}

/* Knowledge Checkboxes */
.knowledge-checkboxes {
    display: none;
    margin-bottom: 20px;
}

.knowledge-checkboxes label {
    display: block;
    margin: 8px 0;
    font-size: 1rem;
    color: #4a5a6b;
}

.knowledge-checkboxes input[type="checkbox"] {
    margin-right: 10px;
    accent-color: #ffd700;
}

.knowledge-checkboxes strong {
    color: #2a5298;
    font-weight: 600;
}

/* Footer */
footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    text-align: center;
    padding: 15px 0;
    background: linear-gradient(135deg, #0a192f, #1c3d5a);
    color: #e6e6e6;
    box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.3);
    font-size: 0.95rem;
    font-weight: 300;
}

/* Animations */
@keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        flex-direction: column;
        width: 95%;
        margin: 20px auto;
        gap: 20px;
    }

    .form-container,
    .result-container {
        width: 100%;
        padding: 25px;
    }

    header h1 {
        font-size: 2.4rem;
    }

    .form-container h2,
    .result-container h2 {
        font-size: 1.8rem;
    }

    input[type="text"],
    select {
        padding: 12px;
        font-size: 1rem;
    }

    button {
        padding: 12px;
        font-size: 1.1rem;
    }

    .response {
        padding: 20px;
        font-size: 1rem;
    }

    footer {
        padding: 10px 0;
        font-size: 0.9rem;
    }
}
    </style>
</head>
<body>

<header>
    <h1>AI Hỗ Trợ Học Tập</h1>
</header>

<div class="container">
    <div class="form-container">
        <h2>Chọn Thông Tin</h2>
        <select id="class">
            <option value="">Chọn lớp</option>
            <option value="10">Lớp 10</option>
            <option value="11">Lớp 11</option>
            <option value="12">Lớp 12</option>
        </select>

        <select id="subject" onchange="updateKnowledgeCheckboxes()">
            <option value="">Chọn môn học</option>
            <option value="Toán">Toán</option>
            <option value="Văn">Văn</option>
            <option value="Anh">Tiếng Anh</option>
            <option value="Lý">Vật Lý</option>
            <option value="Hóa">Hóa Học</option>
        </select>

        <div id="mathCheckboxes" class="knowledge-checkboxes">
            <label><strong>Kiến thức cần cải thiện (Toán):</strong></label><br>
            <label><input type="checkbox" value="Đại số"> Đại số</label><br>
            <label><input type="checkbox" value="Hình học"> Hình học</label><br>
            <label><input type="checkbox" value="Giải tích"> Giải tích</label><br>
            <label><input type="checkbox" value="Xác suất và thống kê"> Xác suất và thống kê</label><br>
            <label><input type="checkbox" value="Hình học không gian"> Hình học không gian</label><br>
            <label><input type="checkbox" value="Phương trình và bất phương trình"> Phương trình và bất phương trình</label><br>
        </div>

        <div id="literatureCheckboxes" class="knowledge-checkboxes">
            <label><strong>Kiến thức cần cải thiện (Văn):</strong></label><br>
            <label><input type="checkbox" value="Thơ"> Thơ</label><br>
            <label><input type="checkbox" value="Nghị luận"> Nghị luận</label><br>
            <label><input type="checkbox" value="Phân tích tác phẩm"> Phân tích tác phẩm</label><br>
        </div>

        <div id="englishCheckboxes" class="knowledge-checkboxes">
            <label><strong>Kiến thức cần cải thiện (Tiếng Anh):</strong></label><br>
            <label><input type="checkbox" value="Ngữ pháp"> Ngữ pháp</label><br>
            <label><input type="checkbox" value="Từ vựng"> Từ vựng</label><br>
            <label><input type="checkbox" value="Nghe"> Nghe</label><br>
            <label><input type="checkbox" value="Nói"> Nói</label><br>
        </div>

        <div id="physicsCheckboxes" class="knowledge-checkboxes">
            <label><strong>Kiến thức cần cải thiện (Vật Lý):</strong></label><br>
            <label><input type="checkbox" value="Cơ học"> Cơ học</label><br>
            <label><input type="checkbox" value="Điện từ"> Điện từ</label><br>
            <label><input type="checkbox" value="Quang học"> Quang học</label><br>
        </div>

        <div id="chemistryCheckboxes" class="knowledge-checkboxes">
            <label><strong>Kiến thức cần cải thiện (Hóa Học):</strong></label><br>
            <label><input type="checkbox" value="Phản ứng hóa học"> Phản ứng hóa học</label><br>
            <label><input type="checkbox" value="Phân tích hóa học"> Phân tích hóa học</label><br>
            <label><input type="checkbox" value="Hóa hữu cơ"> Hóa hữu cơ</label><br>
        </div>

        <input type="text" id="currentScore" placeholder="Điểm số hiện tại" required>
        <input type="text" id="desiredScore" placeholder="Điểm số mong muốn" required>
        <input type="text" id="otherIssues" placeholder="Các vấn đề khác">

        <button onclick="getStudyPlan()">Nhận lộ trình học tập</button>
    </div>

    <div class="result-container">
        <h2>Kết Quả</h2>
        <div class="response" id="response"></div>
    </div>
</div>

<footer>
    <p>&copy; 2025 AI Hỗ Trợ Học Tập. Tất cả quyền được bảo lưu.</p>
</footer>

<script>
    function getSelectedKnowledgeNeeds() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        const selectedValues = Array.from(checkboxes).map(checkbox => checkbox.value);
        return selectedValues.join(', ');
    }

    function updateKnowledgeCheckboxes() {
        const subject = document.getElementById("subject").value;

        // Ẩn tất cả checkbox
        document.querySelectorAll('.knowledge-checkboxes').forEach((element) => {
            element.style.display = 'none';
        });

        // Hiển thị checkbox tương ứng với môn học đã chọn
        if (subject === "Toán") {
            document.getElementById("mathCheckboxes").style.display = 'block';
        } else if (subject === "Văn") {
            document.getElementById("literatureCheckboxes").style.display = 'block';
        } else if (subject === "Anh") {
            document.getElementById("englishCheckboxes").style.display = 'block';
        } else if (subject === "Lý") {
            document.getElementById("physicsCheckboxes").style.display = 'block';
        } else if (subject === "Hóa") {
            document.getElementById("chemistryCheckboxes").style.display = 'block';
        }
    }

    async function getStudyPlan() {
        const classLevel = document.getElementById("class").value;
        const subject = document.getElementById("subject").value;
        const currentScore = document.getElementById("currentScore").value;
        const desiredScore = document.getElementById("desiredScore").value;
        const knowledgeNeed = getSelectedKnowledgeNeeds();
        const otherIssues = document.getElementById("otherIssues").value;

        const responseDiv = document.getElementById("response");

        if (classLevel && subject && currentScore && desiredScore) {
            const userMessage = `Lớp ${classLevel}, Môn ${subject}, Điểm hiện tại ${currentScore}, Mong muốn ${desiredScore}, Kiến thức cần cải thiện: ${knowledgeNeed}, Các vấn đề khác: ${otherIssues}`;

            try {
                const response = await fetch('http://localhost:3000/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message: userMessage })
                });

                const data = await response.json();
                responseDiv.innerHTML = formatResponse(data.message);
            } catch (error) {
                console.error("Lỗi:", error);
                responseDiv.innerHTML = "Đã xảy ra lỗi. Vui lòng thử lại sau.";
            }
        } else {
            responseDiv.innerHTML = "Vui lòng điền đầy đủ thông tin!";
        }
    }

    function formatResponse(rawContent) {
        let formattedContent = `<h2>Lộ trình học tập đề xuất:</h2>`;
        
        const sections = rawContent.split("\n");
        sections.forEach(section => {
            if (section.trim()) {
                if (section.startsWith("Mục tiêu:")) {
                    formattedContent += `<h3>${section}</h3>`;
                } else if (section.startsWith("Thời gian:")) {
                    formattedContent += `<h3>${section}</h3>`;
                } else {
                    formattedContent += `<p>${section}</p>`;
                }
            }
        });

        return formattedContent;
    }
</script>

</body>
</html>